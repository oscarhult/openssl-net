name: openssl-net
on: push
jobs:
  openssl-net:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v3
    - name: .NET
      uses: actions/setup-dotnet@v2.1.0
    - name: Pack
      run: |
        dotnet pack \
        -c Release \
        -o dist \
        --include-source \
        --include-symbols \
        -p:PackageVersion=1.0.${{github.run_number}} \
        -p:RepositoryUrl=${{github.repositoryUrl}}
    - name: Push
      run: |
        dotnet nuget push \
        dist/**/*.symbols.nupkg \
        -k ${{github.token}} \
        -s https://nuget.pkg.github.com/oscarhult/index.json \
        --skip-duplicate
